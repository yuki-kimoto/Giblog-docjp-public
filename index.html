<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" type="text/css" href="/css/common.css">

<title>Giblog - git世代のためのブログ生成ツール</title>
<meta name="description" content="GiblogはPerlで書かれたブログ生成ツールです。Webサイトとブログを簡単に作成できます。作られたファイルはすべて静的なHTMLで、gitを使って管理することができます。

Giblogは1.0へのリリースに向かってベータテスト中です。機能が警告なく変更されることがあるので、注意してください。">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <!-- header -->
<h1>
  <a class="site-title" href="/">Giblog - git世代のためのブログ作成ツール</a>
</h1>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- top -->

  </div>
  <div class="middle">
    <h1 id="pod">名前</h1>

<p>Giblog - git世代のためのブログ生成ツール</p>

<h1 id="pod1">説明</h1>

<p>GiblogはPerlで書かれたブログ生成ツールです。Webサイトとブログを簡単に作成できます。作られたファイルはすべて静的なHTMLで、gitを使って管理することができます。</p>

<p>Giblogは1.0へのリリースに向かってベータテスト中です。機能が警告なく変更されることがあるので、注意してください。</p>

<h1 id="pod2">使い方</h1>

<pre><code># 新しく空のWebサイトを作成
giblog new mysite

# 新しくWebサイトを作成
giblog new_website mysite

# 新しくブログを作成
giblog new_blog mysite

# ディレクトリ変更
cd mysite

# 新しいエントリーを追加
giblog add

# Webサイトを構築
giblog build

# Webサイトをサーブ(Mojoliciousが必要です)
morbo serve.pl

# ホームディレクトリを指定して新しいエントリーを追加
giblog add --home /home/kimoto/mysite

# ホームディレクトリを指定して、Webサイトを構築
giblog build --home /home/kimoto/mysite</code></pre>

<h1 id="pod3">機能</h1>

<p>Giblogは、以下の機能を持っています。</p>

<ul>

<li><p>Webサイトとブログ作成の両方に対応。</p>

</li>
<li><p>Linux、Mac OS、Windows対応。Windowsでは、msys2のインストールを推奨。</p>

</li>
<li><p>スマートフォン対応を意識した、デフォルトのCSSを提供。</p>

</li>
<li><p>コンテンツを、トップ、ボトム、サイドバー、ヘッダー、フッター、HTMLヘッダで囲んで出力。</p>

</li>
<li><p>pタグをを自動追加。preタグの中で&lt;、&gt;を、自動的にエスケープ。</p>

</li>
<li><p>最初の見出しタグ(h1～h6)から自動的にtitleに設定。</p>

</li>
<li><p>最初の段落を自動的にdescriptionに設定。</p>

</li>
<li><p>機能のカスタマイズは、自由自在。すべてをなくすことも、自由に選ぶことも、機能を追加することも可能。</p>

</li>
<li><p>機能の追加では、一覧ページをカスタマイズしたり、マークダウンを使ったり、Twitterカードを設定したりできます。</p>

</li>
<li><p>Mojoliciousのmorboコマンドを使って、Webサーバーを起動してWebサイトを確認可能。コンテンツやヘッダなどの変更を検知して、自動的に再構築されます。</p>

</li>
<li><p>ベンチマークでは、私の標準的なLinux環境において、645ページを、0.78秒で構築。</p>

</li>
<li><p>JavaScriptの利用制限なし。アフェリエイト広告を張ることも自由。</p>

</li>
<li><p>gitでファイルを管理して、さくらのレンタルサーバーなどに、配置すれば、HTTPSに対応した情報発信サイトを、個数無制限・低価格(ディスク容量100Gで515円)で作成できます。</p>

</li>
<li><p>Github Pagesを利用すれば、手順が少し難しいですが、HTTPSに対応した情報発信サイトを無料で作成できます。</p>

</li>
<li><p>Perlゼミのサイト構築に実際に利用されています。</p>

</li>
</ul>

<h1 id="pod4">チュートリアル</h1>

<h2 id="Web">Webサイトの作成</h2>

<p>３つのプロトタイプからWebサイトを作成できます。</p>

<p><b>1. 空のWebサイト</b></p>

<p>「new」コマンドで、空のWebサイトを作成します。「mysite」はWebサイトの名前の一例です。</p>

<pre><code>giblog new mysite</code></pre>

<p>もし空のWebサイトを作成したい場合は、このプロトタイプを選んでください。</p>

<p>テンプレートとCSSは空で、最低限の構築プロセスのみを提供します。</p>

<p><b>2. Webサイト</b></p>

<p>「new_website」コマンドで、空のWebサイトを作成します。</p>

<pre><code>giblog new_website mysite</code></pre>

<p>もし、Webサイトを作成したい場合は、このプロトタイプを選んでください。</p>

<p>トップページのテンプレート「templates/index.html」が作成されます。</p>

<p>CSSは、スマートフォンサイトに適合しており、基本的な構築プロセスが提供されます。</p>

<p><b>3. ブログ</b></p>

<p>「new_blog」コマンドで、ブログを作成さいます。</p>

<pre><code>giblog new_blog mysite</code></pre>

<p>ブログを作成したい場合は、このプロトタイプを選んでください。</p>

<p>7日間のエントリーを表示したトップページ「templates/index.html」が作成されます。</p>

<p>すべてのページへのリンクを表示した「templates/list.html」が作成されます。</p>

<p>CSSは、スマートフォンサイトに適合しており、基本的な構築プロセスが提供されます。</p>

<h2 id="pod5">エントリーページの追加</h2>

<p>「add」コマンドを使って、ブログのエントリページを追加することができます。</p>

<pre><code>giblog add</code></pre>

<p>「add」コマンドを実行する前に、「mysite」にディレクトリを変更する必要があります。</p>

<pre><code>cd mysite</code></pre>

<p>「--home」オプションを使う場合は、ディレクトリを変更する必要はありません。</p>

<pre><code>giblog add --home /home/kimoto/mysite</code></pre>

<p>作成されたファイル名は、例えば、以下のようになります。</p>

<pre><code>templates/blog/20080108132865.html</code></pre>

<p>このファイル名は、日付と時刻を含みます。</p>

<h2 id="Web1">Webサイトの構築</h2>

<p>「build」コマンドを使うと、Webサイトを構築できます。</p>

<pre><code>giblog build</code></pre>

<p>「build」コマンドを実行する前に、「mysite」にディレクトリを変更する必要があります。</p>

<pre><code>cd mysite</code></pre>

<p>「--home」オプションを使用した場合は、ディレクトリを変更する必要はありません。</p>

<pre><code>giblog build --home /home/kimoto/mysite</code></pre>

<p>構築プロセスとは、いったい何でしょうか。</p>

<p>構築プロセスは「lib/Giblog/Command/build.pm」の中の「run」メソッドに書かれています。</p>

<p>構築プロセスの主な部分は、<a href="/Giblog/API.html">Giblog::API</a>の組み合わせです。</p>

<pre><code># &quot;lib/Giblog/Command/build.pm&quot; in web site created by &quot;new_blog&quot; command
package Giblog::Command::build;

use base &#39;Giblog::Command&#39;;

use strict;
use warnings;

use File::Basename &#39;basename&#39;;

sub run {
  my ($self, @args) = @_;
  
  # API
  my $api = $self-&gt;api;
  
  # Read config
  my $config = $api-&gt;read_config;
  
  # Copy static files to public
  $api-&gt;copy_static_files_to_public;

  # Get files in templates directory
  my $files = $api-&gt;get_templates_files;
  
  for my $file (@$files) {
    # Data
    my $data = {file =&gt; $file};
    
    # Get content from file in templates directory
    $api-&gt;get_content($data);

    # Parse Giblog syntax
    $api-&gt;parse_giblog_syntax($data);

    # Parse title
    $api-&gt;parse_title_from_first_h_tag($data);

    # Add page link
    $api-&gt;add_page_link_to_first_h_tag($data, {root =&gt; &#39;index.html&#39;});

    # Parse description
    $api-&gt;parse_description_from_first_p_tag($data);

    # Read common templates
    $api-&gt;read_common_templates($data);
    
    # Add meta title
    $api-&gt;add_meta_title($data);

    # Add meta description
    $api-&gt;add_meta_description($data);

    # Build entry html
    $api-&gt;build_entry($data);
    
    # Build whole html
    $api-&gt;build_html($data);
    
    # Write to public file
    $api-&gt;write_to_public_file($data);
  }
  
  # Create index page
  $self-&gt;create_index;
  
  # Create list page
  $self-&gt;create_list;
}</code></pre>

<p>「run」メソッドは、「templates」ディレクトリの中のすべてのテンプレートファイルを読み込み、編集し、「public」ディレクトリの中のファイルへ、出力を書き込みます。</p>

<p>もし必要であれば、自分自身でこの構築プロセスを編集できます。</p>

<p>runメソッドの中のAPIを理解する必要がある場合は、<a href="/Giblog/API.html">Giblog::API</a>を見てください。</p>

<h2 id="Web2">Webサイトのサーブ</h2>

<p>もしMojoliciousを持っていれば、Webサイトの構築とサーブができます。</p>

<pre><code>morbo serve.pl</code></pre>

<p>以下のメッセージが表示されます。</p>

<pre><code>Server available at http://127.0.0.1:3000
Server start</code></pre>

<p>「templates」ディレクトリの中のファイルが、更新されると、ビルドされ、サーバーは自動的にリロードされます。</p>

<h1 id="pod6">著者</h1>

<p>Perlゼミ(木本裕紀), <code>&lt;kimoto.yuki at gmail.com&gt;</code></p>

<h1 id="pod7">ライセンスとコピーライト</h1>

<p>Copyright 2018 Yuki Kimoto.</p>

<p>This program is free software; you can redistribute it and/or modify it under the terms of the the Artistic License (2.0). You may obtain a copy of the full license at:</p>

<p><a href="http://www.perlfoundation.org/artistic_license_2_0">http://www.perlfoundation.org/artistic_license_2_0</a></p>


  </div>
  <div class="bottom">
    <!-- bottom -->

  </div>
</div>

        </div>
        <div class="side">
          <!-- side -->
<div class="side-list">
  <div class="side-list-title">
    ドキュメント
  </div>
  <ul>
    <li><a href="/">Giblog</a></li>
    <li><a href="/Giblog/API.html">Giblog::API</a></li>
    <li><a href="/Giblog/Command.html">Giblog::Command</a></li>
    <li><a href="/Giblog/Command/new.html">Giblog::Command::new</a></li>
    <li><a href="/Giblog/Command/new_website.html">Giblog::Command::new_website</a></li>
    <li><a href="/Giblog/Command/new_blog.html">Giblog::Command::new_blog</a></li>
    <li><a href="/Giblog/Command/add.html">Giblog::Command::add</a></li>
    <li><a href="/Giblog/Command/build.html">Giblog::Command::build</a></li>
    <li><a href="https://github.com/yuki-kimoto/giblog">リポジトリ</a></li>
  </ul>
</div>

        </div>
      </div>
      <div class="footer">
        <!-- footer -->
<a href="https://github.com/yuki-kimoto/giblog">Giblog</a>

      </div>
    </div>
  </body>
</html>
