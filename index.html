<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" type="text/css" href="/css/common.css">
<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>

<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
  });
</script>

<title>Giblog - Gitで管理できるWebサイトとブログの作成ツール</title>
<meta name="description" content="GiblogはPerlで書かれたWebサイトとブログの作成ツールです。
Webサイトとブログを簡単に作成できます。
作られるファイルはすべて静的なファイルで、gitを使って管理することができます。
Perlを使って、Webサイトを自由にカスタマイズできます。">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <!-- header -->
<h1>
  <a class="site-title" href="/">Giblog - Gitで管理できるWebサイトとブログの作成ツール</a>
</h1>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- top -->

  </div>
  <div class="middle">
    <h1 id="pod">名前</h1>

<p>Giblog - Gitで管理できるWebサイトとブログの作成ツール</p>

<p>
  <b>Webサイト</b>
</p>
<p>
  <a href="https://new-website-example.giblog.net/"><img src="https://github.com/yuki-kimoto/giblog/raw/master/images/giblog-website.png"></a>
</p>
<p>
  <a href="https://new-website-example.giblog.net/">Webサイトのサンプル</a>
</p>
<p>
  <b>ブログ</b>
</p>
<p>
  <a href="https://new-blog-example.giblog.net/"><img src="https://github.com/yuki-kimoto/giblog/raw/master/images/giblog-blog.png"></a>
</p>
<p>
  <a href="https://new-blog-example.giblog.net/">ブログのサンプル</a>
</p>

<h1 id="pod1">説明</h1>

<p>GiblogはPerlで書かれたWebサイトとブログの作成ツールです。 Webサイトとブログを簡単に作成できます。 作られるファイルはすべて静的なファイルで、gitを使って管理することができます。 Perlを使って、Webサイトを自由にカスタマイズできます。</p>

<h1 id="pod2">使い方</h1>

<pre><code># 新しく空のWebサイトを作成
giblog new mysite

# 新しくWebサイトを作成
giblog new_website mysite

# 新しくブログを作成
giblog new_blog mysite

# ディレクトリ変更
cd mysite

# 新しいエントリーを追加
giblog add

# Webサイトを構築
giblog build

# Webサイトのサーブ
$ giblog serve

# Webサイトの公開
$ giblog publish origin main

# ローカル環境でWebサイトを確認(Mojoliciousが必要)
morbo serve.pl

# ホームディレクトリを指定して新しいエントリーを追加
giblog add --home /home/kimoto/mysite

# ホームディレクトリを指定して、Webサイトを構築
giblog build --home /home/kimoto/mysite</code></pre>

<h1 id="pod3">機能</h1>

<p>Giblogは、以下の機能を持っています。</p>

<ul>

<li><p>Webサイトとブログ作成の両方に対応。</p>

</li>
<li><p>gitですべてのファイルを管理できる</p>

</li>
<li><p>Linux、macOS、Windows対応。Windowsでは、msys2のインストールを推奨。</p>

</li>
<li><p>スマートフォン対応のデフォルトのCSSを提供。</p>

</li>
<li><p>ヘッダ・フッタ・サイドバーをサポート</p>

</li>
<li><p>コンテンツのトップとボトムをカスタマイズ可能。</p>

</li>
<li><p>HTMLヘッダをカスタマイズ可能。</p>

</li>
<li><p>自動的な改行。pタグを自動追加。</p>

</li>
<li><p>preタグの中で&lt;、&gt;を、自動的にエスケープ。</p>

</li>
<li><p>最初の見出しタグ(h1～h6)から自動的にtitleを設定。</p>

</li>
<li><p>最初の段落タグ(p)から自動的にdescriptionを設定。</p>

</li>
<li><p>Perlを使ってWebサイトを自由にカスタマイズできる</p>

</li>
<li><p>ローカル環境でWebサイトを確認可能。コンテンツの変更を検知して、自動的に再構築(Mojoliciousが必要)</p>

</li>
<li><p>速い。標準的なLinux環境で、645ページを、0.78秒で構築。</p>

</li>
</ul>

<h1 id="pod4">チュートリアル</h1>

<h2 id="Web">Webサイトの作成</h2>

<p><b>1. 空のWebサイトを作成</b></p>

<p>「new」コマンドで、空のWebサイトを作成します。「mysite」はWebサイトの名前のひとつの例です。</p>

<pre><code>giblog new mysite</code></pre>

<p>空のWebサイトを作成したい場合は、このコマンドを選んでください。 テンプレートとCSSは空で、最低限のWebサイトの構築処理のみを提供します。</p>

<p><b>2. Webサイトを作成</b></p>

<p>「new_website」コマンドで、空のWebサイトを作成します。</p>

<pre><code>giblog new_website mysite</code></pre>

<p>Webサイトを作成したい場合は、このコマンドを選んでください。 トップページのテンプレート「templates/index.html」が作成されます。 記事のリストを表示した「templates/list.html」作成されます。これは、将来ブログの記事を作成するときにために用意されています。</p>

<p>CSSは、レスポンシブデザインで、スマートフォンに対応しています。 基本的なWebサイトのビルドスクリプトが提供されます。</p>

<p><b>3. ブログを作成</b></p>

<p>「new_blog」コマンドで、ブログを作成します。</p>

<pre><code>giblog new_blog mysite</code></pre>

<p>ブログを作成したい場合は、このコマンドを選んでください。 7日間のエントリーを表示したトップページ「templates/index.html」が作成されます。 すべてのページへのリンクを表示した「templates/list.html」が作成されます。</p>

<p>CSSは、レスポンシブデザインで、スマートフォンに対応しています。 基本的なブログの構築処理が提供されます。</p>

<h2 id="pod5">ブログのエントリーページの追加</h2>

<p>他のディレクトリにいる場合は、「add」コマンドを実行する前に「mysite」にディレクトリを変更する必要があります。</p>

<pre><code>cd mysite</code></pre>

<p>「add」コマンドを使って、ブログのエントリページを追加します。</p>

<pre><code>giblog add</code></pre>

<p>作成されたファイル名は、例えば、以下のようになります。</p>

<pre><code>templates/blog/20080108132865.html</code></pre>

<p>このファイル名は、現在の日付と時刻を含みます。</p>

<p>新しく記事を書くには、このファイルを開いて、 h2とコンテンツを書きます。</p>

<pre><code>&lt;h2&gt;How to use Giblog&lt;/h2&gt;

Giblogの使い方。これは...。</code></pre>

<p>ヘッダとフッタなどのコンテンツを囲むパーツは、構築処理で、自動的に追加されます。</p>

<h2 id="pod6">コンテンツページの追加</h2>

<p>コンテンツページを作成したい場合は、ファイルを「templates」ディレクトリの中に配置します。</p>

<pre><code>templates/access.html
templates/profile.html</code></pre>

<p>新しく記事を書くには、このファイルを開いて、 h2とコンテンツを書きます。</p>

<pre><code>&lt;h2&gt;How to use Giblog&lt;/h2&gt;

Giblogの使い方。これは...。</code></pre>

<p>ヘッダとフッタなどのコンテンツを囲むパーツは、構築処理で、自動的に追加されます。</p>

<p>サブディレクトリに、ファイルを置くこともできます。</p>

<pre><code>templates/profile/more.html</code></pre>

<p>「templates/static」と「templates/common」は特別なディレクトリであることに注意してください。 これらのディレクトリに、コンテントページのファイルを配置しないでください。</p>

<pre><code># コンテンツファイルを配置してはいけない特別なディレクトリ
templates/static
templates/common</code></pre>

<h2 id="pod7">静的ページの追加</h2>

<p>CSSや画像やJavaScriptなどの静的なファイルを追加したいときは それらのファイルを「templates/static」ディレクトリに配置してください。</p>

<p>「templates/static」ディレクトリにあるファイルは、構築処理で、単にコピーされます。</p>

<pre><code>templates/static/js/jquery.js
templates/static/images/logo.png
templates/static/css/more.css</code></pre>

<h2 id="pod8">ヘッダ、フッタ、サイドバー、コンテンツの上、コンテンツの下のカスタマイズ</h2>

<p>ヘッダ、フッタ、サイドバー、コンテンツの上、コンテンツの下のカスタマイズができます。</p>

<pre><code>------------------------
ヘッダ
------------------------
コンテンツの上   |
-----------------|
                 |サイド
コンテンツ       |バー
                 |
-----------------|
コンテンツの下   |
------------------------
フッタ
------------------------</code></pre>

<p>これらの部分を編集したい場合は、以下のファイルを編集してください。</p>

<pre><code>templates/common/header.html     ヘッダ
templates/common/top.html        コンテンツの上
templates/common/side.html       サイドバー
templates/common/bottom.html     コンテンツの下
templates/common/footer.html     フッタ</code></pre>

<h2 id="HTML">HTMLヘッダの編集</h2>

<p>HTMLヘッダをカスタマイズすることができます。</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;!-- HTML header --&gt;
  &lt;/head&gt;
  &lt;body&gt;
  
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>HTMLヘッダを編集したい場合は、以下のファイルを編集してください。</p>

<pre><code>templates/common/meta.html</code></pre>

<h2 id="Web1">Webサイトの構築</h2>

<p>他のディレクトリにいる場合は「build」コマンドを実行する前に「mysite」にディレクトリを変更してください。</p>

<pre><code>cd mysite</code></pre>

<p>「build」コマンドを使うと、Webサイトを構築できます。</p>

<pre><code>giblog build</code></pre>

<p>構築処理とは、いったい何ですか?</p>

<p>構築処理は「lib/Giblog/Command/build.pm」の中の「run」メソッドに書かれています。</p>

<pre><code># &quot;lib/Giblog/Command/build.pm&quot; in web site created by &quot;new_blog&quot; command
package Giblog::Command::build;

use base &#39;Giblog::Command&#39;;

use strict;
use warnings;

use File::Basename &#39;basename&#39;;

sub run {
  my ($self, @args) = @_;

  # API
  my $api = $self-&gt;api;

  # Read config
  my $config = $api-&gt;read_config;

  # Copy static files to public
  $api-&gt;copy_static_files_to_public;

  # Get files in templates directory
  my $files = $api-&gt;get_templates_files;

  for my $file (@$files) {
    # Data
    my $data = {file =&gt; $file};

    # Get content from file in templates directory
    $api-&gt;get_content($data);

    # Parse Giblog syntax
    $api-&gt;parse_giblog_syntax($data);

    # Parse title
    $api-&gt;parse_title_from_first_h_tag($data);

    # Edit title
    my $site_title = $config-&gt;{site_title};
    if ($data-&gt;{file} eq &#39;index.html&#39;) {
      $data-&gt;{title} = $site_title;
    }
    else {
      $data-&gt;{title} = &quot;$data-&gt;{title} - $site_title&quot;;
    }

    # Add page link
    $api-&gt;add_page_link_to_first_h_tag($data, {root =&gt; &#39;index.html&#39;});

    # Parse description
    $api-&gt;parse_description_from_first_p_tag($data);

    # Read common templates
    $api-&gt;read_common_templates($data);

    # Add meta title
    $api-&gt;add_meta_title($data);

    # Add meta description
    $api-&gt;add_meta_description($data);

    # Build entry html
    $api-&gt;build_entry($data);

    # Build whole html
    $api-&gt;build_html($data);

    # Write to public file
    $api-&gt;write_to_public_file($data);
  }

  # Create index page
  $self-&gt;create_index;

  # Create list page
  $self-&gt;create_list;
}</code></pre>

<p>もし必要であれば、自分自身でこの構築処理をカスタマイズできます。</p>

<p>runメソッドの中のAPIを理解したい場合は、<a href="https://metacpan.org/pod/Giblog::API">Giblog::API</a>を見てください。</p>

<h2 id="Web2">Webサイトのサーブ</h2>

<p>もし<a href="https://metacpan.org/pod/Mojolicious">Mojolicious</a>がインストールされていれば、Webサイトをローカル環境でチェックできます。</p>

<pre><code>morbo serve.pl</code></pre>

<p>以下のメッセージが表示されます。</p>

<pre><code>Server available at http://127.0.0.1:3000
Server start</code></pre>

<p>ブラウザから上記のURLでWebサイトを確認できます。</p>

<p>Webサイトは「templates」ディレクトリの中のファイルが変更されると 自動的に再構築されます。 手動で「build」コマンドを実行する必要はありません。</p>

<h1 id="pod9">設定ファイル</h1>

<p>Giblogの設定ファイルは<code>giblog.conf</code>です。</p>

<p>これはPerlスクリプトで、ハッシュリファレンスで設定を返します。</p>

<pre><code>use strict;
use warnings;
use utf8;

# giblog.conf
{
  site_title =&gt; &#39;mysite😄&#39;,
  site_url =&gt; &#39;http://somesite.example&#39;,
}</code></pre>

<h2 id="site_title">site_title</h2>

<pre><code>site_title =&gt; &#39;mysite😄&#39;</code></pre>

<p>サイトタイトル。</p>

<h2 id="site_url">site_url</h2>

<pre><code>site_url =&gt; &#39;http://somesite.example&#39;</code></pre>

<p>サイトURL。</p>

<h2 id="base_path">base_path</h2>

<pre><code>base_path =&gt; &#39;/subdir&#39;</code></pre>

<p>ベースパス。ベースパスは、あなたのサイトをサブディレクトリで配置するときに利用されいます。</p>

<p>たとえば、Github PagesのプロジェクトページのURLが以下だったとしましょう。</p>

<pre><code>https://yuki-kimoto.github.io/giblog-theme1-public/</code></pre>

<p>以下を指定します。</p>

<pre><code>base_path =&gt; &#39;/giblog-theme1-public&#39;</code></pre>

<p>最初の文字は、スラッシュである<code>/</code>で始まる必要があります。</p>

<p>HTMLファイルは、<code>public/giblog-theme1-public</code>ディレクトリに出力されます。</p>

<h1 id="pod10">メソッド</h1>

<p>これらのメソッドは、内部的なメソッドです。</p>

<p>通常は、これらのメソッドを知る必要はありません。</p>

<p>HTMLコンテンツを扱いたい場合は<a href="https://metacpan.org/pod/Giblog::API">Giblog::API</a>を見てください。</p>

<h2 id="new">new</h2>

<pre><code>my $api = Giblog-&gt;new(%params);</code></pre>

<p><a href="https://metacpan.org/pod/Giblog">Giblog</a>オブジェクトを作成します。</p>

<p><b>パラメーター:</b></p>

<ul>

<li><p>home_dir - ホームディレクトリ</p>

</li>
<li><p>config - 設定</p>

</li>
</ul>

<h2 id="run_command">run_command</h2>

<pre><code>$giblog-&gt;run_command(@argv);</code></pre>

<p>コマンドシステムを実行します。</p>

<h2 id="config">config</h2>

<pre><code>my $config = $giblog-&gt;config;</code></pre>

<p>Giblogの設定を取得。</p>

<h2 id="home_dir">home_dir</h2>

<pre><code>my $home_dir = $giblog-&gt;home_dir;</code></pre>

<p>ホームディレクトリを取得。</p>

<h1 id="pod11">ドキュメント</h1>

<ul>

<li><p><a href="https://metacpan.org/pod/Giblog">Giblog</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::API">Giblog::API</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command">Giblog::Command</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::new">Giblog::Command::new</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::new_website">Giblog::Command::new_website</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::new_blog">Giblog::Command::new_blog</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::add">Giblog::Command::add</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::build">Giblog::Command::build</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::serve">Giblog::Command::serve</a></p>

</li>
<li><p><a href="https://metacpan.org/pod/Giblog::Command::publish">Giblog::Command::publish</a></p>

</li>
</ul>

<h1 id="FAQ">FAQ</h1>

<h2 id="Giblog-Windows">GiblogはWindowsをサポートしますか?</h2>

<p>GiblogはGitとMojoliciousに依存しているため、GiblogはネイティブWindows（Strawberry Perl、またはActive Perl）をサポートしていません。</p>

<p>WindowsでGiblogを使用したい場合は、WSL2を利用できます。</p>

<h2 id="Giblog-Perl">GiblogがサポートするPerlの最低のバージョンは何ですか?</h2>

<p>GiblogはMojoliciousに依存しているために、Mojoliciousが要求するPerlの最低のバージョンになります。現在はPerl 5.16+です。</p>

<h2 id="Giblog-Git">Giblogが必要とするGitの最低バージョンは何ですか?</h2>

<p>Git 1.8.5+です。</p>

<h2 id="Giblog-1-Giblog-2">Giblog 1からGiblog 2へアップグレードする場合の注意点は何ですか?</h2>

<p>Giblog 2.0からは、Perlの最低バージョンは、Mojoliciousに依存するので、できる限り新しいPerlを利用してください。</p>

<p>Git 1.8.5+が必要です。</p>

<h1 id="Giblog">Giblog公式サイト</h1>

<p><a href="https://jp.giblog.net/">Giblog公式サイト</a></p>

<h1 id="pod12">著者</h1>

<p>木本裕紀, <code>&lt;kimoto.yuki at gmail.com&gt;</code></p>

<h1 id="pod13">ライセンスとコピーライト</h1>

<p>Copyright 2018-2021 Yuki Kimoto.</p>

<p>このプログラムはフリーソフトウェアです。 Artistic License（2.0）の条件の下でそれを再配布および/または修正することができます。あなたは完全なライセンスのコピーを以下から入手することができます。</p>

<p><a href="http://www.perlfoundation.org/artistic_license_2_0">http://www.perlfoundation.org/artistic_license_2_0</a></p>


  </div>
  <div class="bottom">
    <!-- bottom -->

  </div>
</div>

        </div>
        <div class="side">
          <!-- side -->

        </div>
      </div>
      <div class="footer">
        <!-- footer -->
<a href="https://tutorial.perlzemi.com/" style="text-decoration:underline">Perlゼミ制作</a>

      </div>
    </div>
  </body>
</html>
